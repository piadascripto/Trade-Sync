//import orders from './orders.js';

const orders = [
	{
		"Symbol": "AAOI",
		"DateTime": "05/31/2023;103609",
		"Quantity": -100,
		"": -100,
		"TradePrice": 2.37,
		"TradeMoney": -237,
		"Buy/Sell": "SELL",
		"FifoPnlRealized": 0,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "APPLIED OPTOELECTRONICS INC",
		"Conid": 135423662,
		"SecurityID": "US03823U1025",
		"SecurityIDType": "ISIN",
		"CUSIP": "03823U102",
		"ISIN": "US03823U1025",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1138818889,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "05/31/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "05/31/2023",
		"SettleDateTarget": "06/02/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "ISLAND",
		"Proceeds": 237,
		"Taxes": 0,
		"IBCommission": -1.016396,
		"IBCommissionCurrency": "USD",
		"NetCash": 235.983604,
		"ClosePrice": 2.22,
		"Open/CloseIndicator": "O",
		"Notes/Codes": "",
		"CostBasis": -235.983604,
		"FxPnl": 0,
		"MtmPnl": 15,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 453775794,
		"TransactionID": 5268321534,
		"IBExecID": "00012ec5.648ccf2c.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.647585bf.0001",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e8ad995[3]",
		"ExtExecID": "172936965S",
		"OrderTime": "05/30/2023;125030",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "AAOI",
		"DateTime": "05/31/2023;173014",
		"Quantity": 100,
		"": 0,
		"TradePrice": 2.13,
		"TradeMoney": 213,
		"Buy/Sell": "BUY",
		"FifoPnlRealized": 21.983604,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "APPLIED OPTOELECTRONICS INC",
		"Conid": 135423662,
		"SecurityID": "US03823U1025",
		"SecurityIDType": "ISIN",
		"CUSIP": "03823U102",
		"ISIN": "US03823U1025",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1139138004,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "05/31/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "05/31/2023",
		"SettleDateTarget": "06/02/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "ISLAND",
		"Proceeds": -213,
		"Taxes": 0,
		"IBCommission": -1,
		"IBCommissionCurrency": "USD",
		"NetCash": -214,
		"ClosePrice": 2.22,
		"Open/CloseIndicator": "C",
		"Notes/Codes": "",
		"CostBasis": 235.983604,
		"FxPnl": 0,
		"MtmPnl": 9,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 453889644,
		"TransactionID": 5271986393,
		"IBExecID": "00012ec5.648d6de1.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.647585c0.0002",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e8b68d9[2]",
		"ExtExecID": "173152830B",
		"OrderTime": "05/31/2023;155510",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "ABEO",
		"DateTime": "06/05/2023;141726",
		"Quantity": -100,
		"": -100,
		"TradePrice": 4,
		"TradeMoney": -400,
		"Buy/Sell": "SELL",
		"FifoPnlRealized": 0,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "ABEONA THERAPEUTICS INC",
		"Conid": 571221112,
		"SecurityID": "US00289Y2063",
		"SecurityIDType": "ISIN",
		"CUSIP": "00289Y206",
		"ISIN": "US00289Y2063",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1140714946,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "06/05/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "06/05/2023",
		"SettleDateTarget": "06/07/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "ISLAND",
		"Proceeds": 400,
		"Taxes": 0,
		"IBCommission": -1.0177,
		"IBCommissionCurrency": "USD",
		"NetCash": 398.9823,
		"ClosePrice": 4.03,
		"Open/CloseIndicator": "O",
		"Notes/Codes": "",
		"CostBasis": -398.9823,
		"FxPnl": 0,
		"MtmPnl": -3,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 454484310,
		"TransactionID": 5284875567,
		"IBExecID": "00012ec5.6490373d.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.647d68f4.0001",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e8dd82e[2]",
		"ExtExecID": "309337S",
		"OrderTime": "06/05/2023;133010",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "ABEO",
		"DateTime": "06/07/2023;161050",
		"Quantity": 100,
		"": 0,
		"TradePrice": 3.96,
		"TradeMoney": 396,
		"Buy/Sell": "BUY",
		"FifoPnlRealized": 1.9823,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "ABEONA THERAPEUTICS INC",
		"Conid": 571221112,
		"SecurityID": "US00289Y2063",
		"SecurityIDType": "ISIN",
		"CUSIP": "00289Y206",
		"ISIN": "US00289Y2063",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1141934337,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "06/07/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "06/07/2023",
		"SettleDateTarget": "06/09/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "ISLAND",
		"Proceeds": -396,
		"Taxes": 0,
		"IBCommission": -1,
		"IBCommissionCurrency": "USD",
		"NetCash": -397,
		"ClosePrice": 4,
		"Open/CloseIndicator": "C",
		"Notes/Codes": "",
		"CostBasis": 398.9823,
		"FxPnl": 0,
		"MtmPnl": 4,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 454946522,
		"TransactionID": 5302134494,
		"IBExecID": "00012ec5.649254e7.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.648009e9.0002",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e8fa486[3]",
		"ExtExecID": "173229382B",
		"OrderTime": "06/07/2023;154544",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "AIP",
		"DateTime": "05/26/2023;200035",
		"Quantity": -100,
		"": -100,
		"TradePrice": 6.97,
		"TradeMoney": -697,
		"Buy/Sell": "SELL",
		"FifoPnlRealized": 0,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "ARTERIS INC",
		"Conid": 523185660,
		"SecurityID": "US04302A1043",
		"SecurityIDType": "ISIN",
		"CUSIP": "04302A104",
		"ISIN": "US04302A1043",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1137953321,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "05/26/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "05/26/2023",
		"SettleDateTarget": "05/31/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "DRCTEDGE",
		"Proceeds": 697,
		"Taxes": 0,
		"IBCommission": -1.020076,
		"IBCommissionCurrency": "USD",
		"NetCash": 695.979924,
		"ClosePrice": 6.76,
		"Open/CloseIndicator": "O",
		"Notes/Codes": "",
		"CostBasis": -695.979924,
		"FxPnl": 0,
		"MtmPnl": 21,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 453443035,
		"TransactionID": 5260426583,
		"IBExecID": "00012ec5.648b3161.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.646ee83e.0001",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e7f4ff1[2]",
		"ExtExecID": "347836024S",
		"OrderTime": "05/25/2023;101122",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "AIP",
		"DateTime": "05/30/2023;200038",
		"Quantity": 100,
		"": 0,
		"TradePrice": 6.55,
		"TradeMoney": 655,
		"Buy/Sell": "BUY",
		"FifoPnlRealized": 39.979924,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "ARTERIS INC",
		"Conid": 523185660,
		"SecurityID": "US04302A1043",
		"SecurityIDType": "ISIN",
		"CUSIP": "04302A104",
		"ISIN": "US04302A1043",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1138560146,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "05/30/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "05/30/2023",
		"SettleDateTarget": "06/01/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "DRCTEDGE",
		"Proceeds": -655,
		"Taxes": 0,
		"IBCommission": -1,
		"IBCommissionCurrency": "USD",
		"NetCash": -656,
		"ClosePrice": 7.26,
		"Open/CloseIndicator": "C",
		"Notes/Codes": "",
		"CostBasis": 695.979924,
		"FxPnl": 0,
		"MtmPnl": 71,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 453685236,
		"TransactionID": 5266777635,
		"IBExecID": "00012ec5.648c785f.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.646ee83f.0001",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e89bbfe[2]",
		"ExtExecID": "86988744B",
		"OrderTime": "05/25/2023;101122",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "AKBA",
		"DateTime": "05/22/2023;113637",
		"Quantity": -68,
		"": -68,
		"TradePrice": 1.49,
		"TradeMoney": -101.32,
		"Buy/Sell": "SELL",
		"FifoPnlRealized": 0,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "AKEBIA THERAPEUTICS INC",
		"Conid": 146445446,
		"SecurityID": "US00972D1054",
		"SecurityIDType": "ISIN",
		"CUSIP": "00972D105",
		"ISIN": "US00972D1054",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1135421088,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "05/22/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "05/22/2023",
		"SettleDateTarget": "05/24/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "DRCTEDGE",
		"Proceeds": 101.32,
		"Taxes": 0,
		"IBCommission": -1.01067056,
		"IBCommissionCurrency": "USD",
		"NetCash": 100.3093294,
		"ClosePrice": 1.41,
		"Open/CloseIndicator": "O",
		"Notes/Codes": "",
		"CostBasis": -100.3093294,
		"FxPnl": 0,
		"MtmPnl": 5.44,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 452530959,
		"TransactionID": 5235756227,
		"IBExecID": "00012ec5.64856b98.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.646aef2d.0001",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e765521[2]",
		"ExtExecID": "521290S",
		"OrderTime": "05/22/2023;111512",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
	{
		"Symbol": "AKBA",
		"DateTime": "05/22/2023;154506",
		"Quantity": 68,
		"": 0,
		"TradePrice": 1.43,
		"TradeMoney": 97.24,
		"Buy/Sell": "BUY",
		"FifoPnlRealized": 2.096929,
		"ClientAccountID": "DU7167678",
		"AccountAlias": "",
		"Model": "",
		"CurrencyPrimary": "USD",
		"FXRateToBase": 1,
		"AssetClass": "STK",
		"SubCategory": "COMMON",
		"Description": "AKEBIA THERAPEUTICS INC",
		"Conid": 146445446,
		"SecurityID": "US00972D1054",
		"SecurityIDType": "ISIN",
		"CUSIP": "00972D105",
		"ISIN": "US00972D1054",
		"ListingExchange": "NASDAQ",
		"UnderlyingConid": "",
		"UnderlyingSymbol": "",
		"UnderlyingSecurityID": "",
		"UnderlyingListingExchange": "",
		"Issuer": "",
		"Multiplier": 1,
		"Strike": "",
		"TradeID": 1135675004,
		"Expiry": "",
		"RelatedTradeID": "",
		"Put/Call": "",
		"ReportDate": "05/22/2023",
		"PrincipalAdjustFactor": "",
		"TradeDate": "05/22/2023",
		"SettleDateTarget": "05/24/2023",
		"TransactionType": "ExchTrade",
		"Exchange": "BYX",
		"Proceeds": -97.24,
		"Taxes": 0,
		"IBCommission": -0.9724,
		"IBCommissionCurrency": "USD",
		"NetCash": -98.2124,
		"ClosePrice": 1.41,
		"Open/CloseIndicator": "C",
		"Notes/Codes": "",
		"CostBasis": 100.309329,
		"FxPnl": 0,
		"MtmPnl": -1.36,
		"OrigTradePrice": 0,
		"OrigTradeDate": "",
		"OrigTradeID": "",
		"OrigOrderID": 0,
		"OrigTransactionID": 0,
		"ClearingFirmID": "",
		"IBOrderID": 452602719,
		"TransactionID": 5239412535,
		"IBExecID": "00012ec5.64865f9a.01.01",
		"RelatedTransactionID": "",
		"BrokerageOrderID": "011210e9.00012ff4.646aef2f.0003",
		"OrderReference": "",
		"VolatilityOrderLink": "",
		"ExchOrderID": "011210e9.00012ad4.6e769e2f[2]",
		"ExtExecID": "1318167B",
		"OrderTime": "05/22/2023;154457",
		"OpenDateTime": "",
		"HoldingPeriodDateTime": "",
		"WhenRealized": "",
		"WhenReopened": "",
		"LevelOfDetail": "EXECUTION",
		"ChangeInPrice": 0,
		"ChangeInQuantity": 0,
		"OrderType": "LMT",
		"TraderID": "",
		"IsAPIOrder": "N",
		"AccruedInterest": 0,
		"SerialNumber": "",
		"DeliveryType": "",
		"CommodityType": "",
		"Fineness": 0,
		"Weight": "0.0 ()"
	},
]



// Fomart the json data and Keys
const formattedOrders = orders.map(order => {
	const [date, time] = order.DateTime.split(';');
	const [month, day, year] = date.split('/');
	const [hour, minute, second] = time.match(/\d{2}/g);
	const formattedDateTime = new Date(`${year}-${month}-${day}T${hour}:${minute}:${second}`);
	const updatedOrder = Object.fromEntries(
		Object.entries(order).map(([key, value]) => {
			if (typeof value === 'number') {
				if (key === 'TradeID'|| key === 'Quantity') {
					return [key.replace('/', ''), value];
				} else {
					return [key.replace('/', ''), Math.floor(value * 100) / 100];
				}
			}
			return [key.replace('/', ''), value];
		})
	);
	return { ...updatedOrder, DateTime: formattedDateTime };
});

// Sort the trades
const sortedOrders = formattedOrders.sort((a, b) => a.DateTime - b.DateTime);



const trades = {};

sortedOrders.forEach((order) => {
	const { Symbol, Quantity, IBCommission, TradeMoney } = order;

	if (!trades[Symbol]) {
		trades[Symbol] = {
			Symbol,
			TradeType: "",
			Result: "",
			TradeQuantity: 0,
			TradeResult: 0,
			BrokerCommission: 0,
			OpenOrderDate: "",
			CloseOrderDate: "",
			Orders: [],
		};
	}

	const selectedProperties = {
		Property1: order.Property1,
		Symbol: order.Symbol,
		DateTime: order.DateTime,
		Quantity: order.Quantity,
		TradePrice: order.TradePrice,
		TradeMoney: order.TradeMoney,
		BuySell: order.BuySell,
		ClientAccountID: order.ClientAccountID,
		Description: order.Description,
		TradeID: order.TradeID,
		IBCommission: order.IBCommission,
		NetCash: order.NetCash,
		OpenCloseIndicator: order.OpenCloseIndicator,
		CostBasis: order.CostBasis,
		OrderType: order.OrderType,
	};

	trades[Symbol].Orders.push(selectedProperties);
	trades[Symbol].TradeQuantity += Quantity;
	trades[Symbol].TradeResult = parseFloat((trades[Symbol].TradeResult + TradeMoney).toFixed(2));
	trades[Symbol].BrokerCommission = parseFloat((trades[Symbol].BrokerCommission + IBCommission).toFixed(2));



	const sum = trades[Symbol].Orders.reduce((total, t) => total + t.Quantity, 0);
	if (sum === 0) {
		const key = "Trade" + Object.keys(trades).length;
		trades[key] = trades[Symbol];
		delete trades[Symbol];
	}
});

Object.values(trades).forEach((trade) => {
	const firstOrder = trade.Orders[0];
	const lastOrder = trade.Orders[trade.Orders.length - 1];

	if (firstOrder.BuySell === "BUY" && firstOrder.OpenCloseIndicator === "O") {
		trade.TradeType = "LONG";
	} else if ((firstOrder.BuySell === "SELL" && firstOrder.OpenCloseIndicator === "O")) {
		trade.TradeType = "SHORT";
		trade.TradeResult = -trade.TradeResult;
	} else {
		trade.TradeType = "ERROR";
		console.log(trade);
	}

	trade.OpenOrderDate = new Date(firstOrder.DateTime).toISOString().split("T")[0];
	trade.CloseOrderDate = new Date(lastOrder.DateTime).toISOString().split("T")[0];

	if (trade.TradeQuantity !== 0) {
		trade.Result = "OPEN";
		delete trade.CloseOrderDate;
		delete trade.TradeResult;
	} else {
		trade.Result = trade.TradeResult >= 0 ? "WIN" : "LOSS";
		delete trade.TradeQuantity;

	}
})



// Basic results
let totalTradeResult = 0;
let winCount = 0;
let totalTradeQuantity = 0;
const numTrades = Object.keys(trades).length;

for (const trade in trades) {
	if (trades.hasOwnProperty(trade)) {
		const tradeResult = trades[trade].TradeResult;
		const tradeQuantity = trades[trade].TradeQuantity;

		if (typeof tradeResult === "number" && !isNaN(tradeResult)) {
			totalTradeResult += tradeResult;
		}

		if (typeof tradeQuantity === "number" && !isNaN(tradeQuantity)) {
			totalTradeQuantity += tradeQuantity;
		}

		if (trades[trade].Result === "WIN") {
			winCount++;
		}
	}
}




const winRate = (winCount / Object.keys(trades).length) * 100;

console.log("Trades: " + Object.keys(trades).length);
console.log("Total Trade Result:", totalTradeResult);
console.log("Total Trade Quantity:", totalTradeQuantity);
console.log("Win Rate:", winRate.toFixed(2) + "%");
console.log(JSON.stringify(trades, null, 2));


// HTML handles
document.getElementById("numTrades").textContent = numTrades + " trades"
document.getElementById("winRate").textContent = "Win rate " + winRate + "%";
document.getElementById("allResult").textContent = "USD" + totalTradeResult;



//import Chart from 'https://cdn.jsdelivr.net/npm/chart.js';

// Get the table body element
const tableBody = document.querySelector("#trade-table tbody");

// Iterate over the trades and generate table rows
for (const trade in trades) {
	if (trades.hasOwnProperty(trade)) {
		const tradeData = trades[trade];
		const row = document.createElement("tr");

		// Create table cells and populate with trade data
		const symbolCell = document.createElement("td");
		symbolCell.textContent = tradeData.Symbol;
		row.appendChild(symbolCell);

		const tradeTypeCell = document.createElement("td");
		tradeTypeCell.textContent = tradeData.TradeType;
		row.appendChild(tradeTypeCell);

		const resultCell = document.createElement("td");
		resultCell.textContent = tradeData.Result;
		row.appendChild(resultCell);

		const tradeResultCell = document.createElement("td");
		tradeResultCell.textContent = tradeData.TradeResult;
		row.appendChild(tradeResultCell);

		const brokerCommissionCell = document.createElement("td");
		brokerCommissionCell.textContent = tradeData.BrokerCommission;
		row.appendChild(brokerCommissionCell);

		const openOrderDateCell = document.createElement("td");
		openOrderDateCell.textContent = tradeData.OpenOrderDate;
		row.appendChild(openOrderDateCell);

		const closeOrderDateCell = document.createElement("td");
		closeOrderDateCell.textContent = tradeData.CloseOrderDate;
		row.appendChild(closeOrderDateCell);

		// Append the row to the table body
		tableBody.appendChild(row);
	}
}


// Get the chart canvas element
const chartCanvas = document.querySelector("#trade-chart");

// Extract TradeResult and CloseOrderDate from trades object
const tradeResults = Object.values(trades).map(trade => trade.TradeResult);
const closeOrderDates = Object.values(trades).map(trade => trade.CloseOrderDate);

// Define the colors for bars below and above zero
const colors = tradeResults.map(result => result < 0 ? 'rgba(255, 0, 0, 0.5)' : 'rgba(0, 128, 0, 0.5)');

// Create the chart using Chart.js
new Chart(chartCanvas, {
	type: 'bar',
	data: {
		labels: closeOrderDates,
		datasets: [{
			label: 'Trade Result',
			data: tradeResults,
			backgroundColor: colors,
			borderColor: 'rgba(0, 0, 0, 1)',
			borderWidth: 1
		}]
	},
	options: {
		scales: {
			x: {
				grid: {
					display: false
				}
			},
			y: {
				beginAtZero: true
			}
		}
	}
});

